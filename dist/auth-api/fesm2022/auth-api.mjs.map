{"version":3,"file":"auth-api.mjs","sources":["../../../projects/auth-api/src/lib/adaptor/auth-api.adaptor.ts","../../../projects/auth-api/src/lib/enums/AuthAPI.endPoint.ts","../../../projects/auth-api/src/lib/auth-api.service.ts","../../../projects/auth-api/src/public-api.ts","../../../projects/auth-api/src/auth-api.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Adaptor } from '../interface/adaptor';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthAPIAdaptorService implements Adaptor{\r\n\r\n  constructor() { }\r\n\r\n  adapt(data: any): { message: string, token: string, userEmail: string } {\r\n    return {\r\n      message: data.message,\r\n      token: data.token,\r\n      userEmail: data.user?.email || '',\r\n    };\r\n  }\r\n}\r\n","\r\nexport class AuthEndPoint{\r\n  static LOGIN = \"https://exam.elevateegy.com/api/v1/auth/signin\";\r\n  static REGISTER = \"https://exam.elevateegy.com/api/v1/auth/signup\";\r\n  static LOGOUT = \"https://exam.elevateegy.com/api/v1/auth/logout\";\r\n\r\n  static FORGET_PASSWORD= \"https://exam.elevateegy.com/api/v1/auth/forgotPassword\";\r\n  static VERIFY_CODE= \"https://exam.elevateegy.com/api/v1/auth/verifyResetCode\";\r\n  static RESET_PASSWORD= \"https://exam.elevateegy.com/api/v1/auth/resetPassword\";\r\n\r\n  static LOGIN_USER= \"https://exam.elevateegy.com/api/v1/auth/profileData\";\r\n  static EDIT_PROFILE = \"https://exam.elevateegy.com/api/v1/auth/editProfile\";\r\n  static CHANGE_PASSWORD = \"https://exam.elevateegy.com/api/v1/auth/changePassword\";\r\n  static DELETE_ACCOUNT = \"https://exam.elevateegy.com/api/v1/auth/deleteMe\";\r\n}\r\n","import { inject, Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, catchError, map, of } from 'rxjs';\r\n\r\nimport { AuthAPI } from './base/AuthAPI';\r\nimport { AuthAPIAdaptorService } from './adaptor/auth-api.adaptor';\r\nimport { AuthEndPoint } from './enums/AuthAPI.endPoint';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthApiService implements AuthAPI {\r\n  private readonly _httpClient = inject(HttpClient);\r\n  private readonly _authAPIAdaptorService = inject(AuthAPIAdaptorService);\r\n\r\n  userData: BehaviorSubject<any | null> = new BehaviorSubject<any | null>(null);\r\n\r\n  login(data: any): Observable<any> {\r\n    return this._httpClient.post(AuthEndPoint.LOGIN, data).pipe(\r\n      map((response: any) => {\r\n        const adaptedResponse = this._authAPIAdaptorService.adapt(response);\r\n        if (adaptedResponse.token) {\r\n          this.userData.next(adaptedResponse); // Emit the token and user data\r\n        }\r\n        return adaptedResponse;\r\n      }),\r\n      catchError((error) => {\r\n        console.error('Login API Error:', error);\r\n        return of({ error: error.message || 'An error occurred during login.' });\r\n      })\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of auth-api\r\n */\r\n\r\nexport * from './lib/auth-api.service';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;MAMa,qBAAqB,CAAA;AAEhC,IAAA,WAAA,GAAA;AAEA,IAAA,KAAK,CAAC,IAAS,EAAA;QACb,OAAO;YACL,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,KAAK,EAAE,IAAI,CAAC,KAAK;AACjB,YAAA,SAAS,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,IAAI,EAAE;SAClC;;uGATQ,qBAAqB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA;AAArB,IAAA,OAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,qBAAqB,cAFpB,MAAM,EAAA,CAAA;;2FAEP,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBAHjC,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE;AACb,iBAAA;;;MCJY,YAAY,CAAA;AACvB,IAAA,OAAO,KAAK,GAAG,gDAAgD;AAC/D,IAAA,OAAO,QAAQ,GAAG,gDAAgD;AAClE,IAAA,OAAO,MAAM,GAAG,gDAAgD;AAEhE,IAAA,OAAO,eAAe,GAAE,wDAAwD;AAChF,IAAA,OAAO,WAAW,GAAE,yDAAyD;AAC7E,IAAA,OAAO,cAAc,GAAE,uDAAuD;AAE9E,IAAA,OAAO,UAAU,GAAE,qDAAqD;AACxE,IAAA,OAAO,YAAY,GAAG,qDAAqD;AAC3E,IAAA,OAAO,eAAe,GAAG,wDAAwD;AACjF,IAAA,OAAO,cAAc,GAAG,kDAAkD;;;MCF/D,cAAc,CAAA;AACR,IAAA,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;AAChC,IAAA,sBAAsB,GAAG,MAAM,CAAC,qBAAqB,CAAC;AAEvE,IAAA,QAAQ,GAAgC,IAAI,eAAe,CAAa,IAAI,CAAC;AAE7E,IAAA,KAAK,CAAC,IAAS,EAAA;QACb,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CACzD,GAAG,CAAC,CAAC,QAAa,KAAI;YACpB,MAAM,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,QAAQ,CAAC;AACnE,YAAA,IAAI,eAAe,CAAC,KAAK,EAAE;gBACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;;AAEtC,YAAA,OAAO,eAAe;AACxB,SAAC,CAAC,EACF,UAAU,CAAC,CAAC,KAAK,KAAI;AACnB,YAAA,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC;AACxC,YAAA,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,iCAAiC,EAAE,CAAC;SACzE,CAAC,CACH;;uGAnBQ,cAAc,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA;AAAd,IAAA,OAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,cAAc,cAFb,MAAM,EAAA,CAAA;;2FAEP,cAAc,EAAA,UAAA,EAAA,CAAA;kBAH1B,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA;;;ACVD;;AAEG;;ACFH;;AAEG;;;;"}